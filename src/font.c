#include <string.h>
#include <stdio.h>

#include "globals.h"
#include "primitives.h"
#include "font.h"

line characters[36][9] = {
	{{12, 0, 0, 31}, {12, 0, 24, 31}, {6, 16, 18, 16}, {-1, -1, -1, -1}}, // A

	{{4 ,0 , 4, 31}, {4, 0, 16, 0}, {4, 16, 16, 16}, {4, 31, 17, 31},
		{16, 0, 24, 8}, {16, 16, 24, 8}, {16, 16, 24, 24}, {16, 31, 24, 24}, {-1, -1, -1, -1}}, // B

	{{0, 24, 0, 8}, {0, 8, 6, 0}, {6, 0, 14, 0}, {14, 0, 20, 8},
		{0, 24, 6, 31}, {6, 31, 14, 31}, {14, 31, 20, 24}, {-1, -1, -1, -1}}, // C

	{{0, 0, 0, 31}, {0, 0, 12, 0}, {0, 31, 14, 31}, {12, 0, 20, 8},
		{12, 31, 20, 24}, {20, 8, 20, 24}, {-1, -1, -1, -1}}, // D

	{{0, 0, 0, 31}, {0, 0, 20, 0}, {0, 16, 20, 16}, {0, 31, 20, 31}, {-1, -1, -1, -1}}, // E

	{{0, 0, 0, 31}, {0, 0, 20, 0}, {0, 16, 20, 16}, {-1, -1, -1, -1}}, // F

	{{8, 0, 26, 0}, {8, 0, 0, 8}, {0, 8, 0, 24}, {0, 24, 8, 31},
		{8, 31, 24, 31}, {24, 31, 24, 16}, {28, 16, 16, 16}, {-1, -1, -1, -1}}, // G

	{{0, 0, 0, 31}, {24, 0, 24, 31}, {0, 16, 24, 16}, {-1, -1, -1, -1}}, // H

	{{16, 0, 16, 31}, {24, 0, 8, 0}, {24, 31, 8, 31}, {-1, -1, -1, -1}}, // I

	{{8, 0, 16, 0}, {16, 0, 16, 24}, {16, 24, 12, 31}, {12, 31, 6, 31},
		{6, 31, 0, 24}, {-1, -1, -1, -1}}, // J

	{{0, 0, 0, 31}, {0, 16, 20, 0}, {0, 16, 20, 31}, {-1, -1, -1, -1}}, // K

	{{0, 0, 0, 31}, {0, 31, 20, 31}, {-1, -1, -1, -1}}, // L

	{{0, 31, 0, 0}, {0, 0, 10, 24}, {10, 24, 20, 0}, {20, 0, 20, 31}, {-1, -1, -1, -1}}, // M

	{{0, 31, 0, 0}, {0, 0, 20, 31}, {20, 31, 20, 0}, {-1, -1, -1, -1}}, // N

	{{0, 24, 0, 8}, {0, 8, 6, 0}, {6, 0, 14, 0}, {14, 0, 20, 8},
		{20, 8, 20, 24}, {20, 24, 14, 31}, {14, 31, 6, 31}, {6, 31, 0, 24}, {-1, -1, -1, -1}}, // O

	{{0, 31, 0, 0}, {0, 0, 16, 0}, {16, 0, 20, 8},
		{20, 8, 16, 16}, {16, 16, 0, 16}, {-1, -1, -1, -1}}, // P

	{{0, 24, 0, 8}, {0, 8, 6, 0}, {6, 0, 14, 0}, {14, 0, 20, 8},
		{20, 8, 20, 24}, {20, 24, 14, 31}, {14, 31, 6, 31}, {6, 31, 0, 24}, {12, 22, 22, 31}}, // Q

	{{4, 31, 4, 0}, {4, 0, 16, 0}, {16, 0, 24, 8}, {24, 8, 16, 16},
		{16, 16, 24, 31}, {4, 16, 16, 16}, {-1, -1, -1, -1}}, // R

	{{20, 0, 6, 0}, {6, 0, 0, 8}, {0, 8, 6, 16}, {6, 16, 14, 16},
		{14, 16 ,20, 24}, {20, 24, 16, 31}, {16, 31, 0, 31}, {-1, -1, -1, -1}}, // S

	{{0, 0, 24, 0}, {12, 0, 12, 31}, {-1, -1, -1, -1}}, // T

	{{0, 24, 0, 0}, {20, 0, 20, 24}, {20, 24, 14, 31},{14, 31, 6, 31},
		{6, 31, 0, 24}, {-1, -1, -1, -1}}, // U

	{{0, 0, 12, 31}, {12, 31, 24, 0}, {-1, -1, -1, -1}}, // V

	{{0, 0, 6, 31}, {6, 31, 12, 4}, {12, 4, 18, 31}, {18, 31, 24, 0}, {-1, -1, -1, -1}}, // W

	{{0, 0, 20, 31}, {20, 0, 0, 31}, {-1, -1, -1, -1}}, // X

	{{0, 0, 10, 16}, {10, 16, 10, 31}, {10, 16, 20, 0}, {-1, -1, -1, -1}}, // Y

	{{0, 0, 20, 0}, {20, 0, 0, 31}, {0, 31, 20, 31}, {-1, -1, -1, -1}}, // Z

	// ============================================================================================

	{{0, 24, 0, 8}, {0, 8, 6, 0}, {6, 0, 14, 0}, {14, 0, 20, 8},
	{20, 8, 20, 24}, {20, 24, 14, 31}, {14, 31, 6, 31}, {6, 31, 0, 24}, {3, 4, 16.5, 28}}, // 0

	{{2, 8, 10, 0}, {10, 0, 10, 31}, {0, 31, 20, 31}, {-1, -1, -1, -1}}, // 1
};

void drawText(char* string, int x, int y, float sizeMul, u8 r, u8 g, u8 b, int thicc){
	int offset;
	for (int i = 0; i < strlen(string); i++){
		if (string[i] >= 48 && string[i] <= 57){
			offset = string[i] - 22;
		}else if (string[i] >= 65 && string[i] <= 90){
			offset = string[i] - 65;
		}else{
			continue;
		}
		
		for (int j = 0; j < 9; j++){
			if (characters[offset][j].x1 == -1) break;
			drawLine((int)((characters[offset][j].x1)*sizeMul + x + i*32*sizeMul), (int)((characters[offset][j].y1)*sizeMul + y),
				(int)((characters[offset][j].x2)*sizeMul + x + i*32*sizeMul), (int)((characters[offset][j].y2)*sizeMul + y), r, g, b, thicc);
		}
	}
}
