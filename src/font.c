#include <string.h>

#include "globals.h"
#include "primitives.h"
#include "font.h"

typedef struct {
	int x1;
	int y1;
	int x2;
	int y2;
}line;

line letters[26][9] = {
	{{12, 0, 0, 32}, {12, 0, 24, 32}, {6, 16, 18, 16}, {-1, -1, -1, -1}}, // A

	{{4 ,0 , 4, 32}, {4, 0, 16, 0}, {4, 16, 16, 16}, {4, 31, 18, 31},
		{16, 0, 24, 8}, {16, 16, 24, 8}, {16, 16, 24, 24}, {16, 32, 24, 24}, {-1, -1, -1, -1}}, // B

	{{0, 24, 0, 8}, {0, 8, 6, 0}, {6, 0, 14, 0}, {14, 0, 20, 8},
		{0, 24, 6, 32}, {6, 32, 14, 32}, {14, 32, 20, 24}, {-1, -1, -1, -1}}, // C

	{{0, 0, 0, 32}, {0, 0, 12, 0}, {0, 31, 14, 31}, {12, 0, 20, 8},
		{12, 32, 20, 24}, {20, 8, 20, 24}, {-1, -1, -1, -1}}, // D

	{{0, 0, 0, 32}, {0, 0, 20, 0}, {0, 16, 20, 16}, {0, 32, 20, 32}, {-1, -1, -1, -1}}, // E

	{{0, 0, 0, 32}, {0, 0, 20, 0}, {0, 16, 20, 16}, {-1, -1, -1, -1}}, // F

	{{8, 0, 26, 0}, {8, 0, 0, 8}, {0, 8, 0, 24}, {0, 24, 8, 32},
		{8, 32, 24, 32}, {24, 32, 24, 16}, {28, 16, 16, 16}, {-1, -1, -1, -1}}, // G

	{{0, 0, 0, 32}, {24, 0, 24, 32}, {0, 16, 24, 16}, {-1, -1, -1, -1}}, // H

	{{16, 0, 16, 32}, {24, 0, 8, 0}, {24, 32, 8, 32}, {-1, -1, -1, -1}}, // I

	{{8, 0, 16, 0}, {16, 0, 16, 24}, {16, 24, 12, 32}, {12, 32, 6, 32},
		{6, 32, 0, 24}, {-1, -1, -1, -1}}, // J

	{{0, 0, 0, 32}, {0, 16, 20, 0}, {0, 16, 20, 32}, {-1, -1, -1, -1}}, // K

	{{0, 0, 0, 32}, {0, 32, 20, 32}, {-1, -1, -1, -1}}, // L

	{{0, 32, 0, 0}, {0, 0, 10, 24}, {10, 24, 20, 0}, {20, 0, 20, 32}, {-1, -1, -1, -1}}, // M

	{{0, 32, 0, 0}, {0, 0, 20, 32}, {20, 32, 20, 0}, {-1, -1, -1, -1}}, // N

	{{0, 24, 0, 8}, {0, 8, 6, 0}, {6, 0, 14, 0}, {14, 0, 20, 8},
		{20, 8, 20, 24}, {20, 24, 14, 32}, {14, 32, 6, 32}, {6, 32, 0, 24}, {-1, -1, -1, -1}}, // O

	{{0, 32, 0, 0}, {0, 0, 16, 0}, {16, 0, 20, 8},
		{20, 8, 16, 16}, {16, 16, 0, 16}, {-1, -1, -1, -1}}, // P

	{{0, 24, 0, 8}, {0, 8, 6, 0}, {6, 0, 14, 0}, {14, 0, 20, 8},
		{20, 8, 20, 24}, {20, 24, 14, 32}, {14, 32, 6, 32}, {6, 32, 0, 24}, {12, 22, 22, 32}}, // Q

	{{4, 32, 4, 0}, {4, 0, 16, 0}, {16, 0, 24, 8}, {24, 8, 16, 16},
		{16, 16, 24, 32}, {4, 16, 16, 16}, {-1, -1, -1, -1}}, // R

	{{20, 0, 6, 0}, {6, 0, 0, 8}, {0, 8, 6, 16}, {6, 16, 14, 16},
		{14, 16 ,20, 24}, {20, 24, 16, 32}, {16, 31, 0, 31}, {-1, -1, -1, -1}}, // S

	{{0, 0, 24, 0}, {12, 0, 12, 32}, {-1, -1, -1, -1}}, // T

	{{0, 24, 0, 0}, {20, 0, 20, 24}, {20, 24, 14, 32},{14, 32, 6, 32},
		{6, 32, 0, 24}, {-1, -1, -1, -1}}, // U

	{{0, 0, 12, 32}, {12, 32, 24, 0}, {-1, -1, -1, -1}}, // V

	{{0, 0, 6, 32}, {6, 32, 12, 4}, {12, 4, 18, 32}, {18, 32, 24, 0}, {-1, -1, -1, -1}}, // W

	{{0, 0, 20, 32}, {20, 0, 0, 32}, {-1, -1, -1, -1}}, // X

	{{0, 0, 10, 16}, {10, 16, 10, 32}, {10, 16, 20, 0}, {-1, -1, -1, -1}}, // Y

	{{0, 0, 20, 0}, {20, 0, 0, 32}, {0, 32, 20, 32}, {-1, -1, -1, -1}}, // Z
};

void drawText(char* string, int x, int y, float sizeMul, u8 r, u8 g, u8 b, int thicc){
	for (int i = 0; i < strlen(string); i++){
		int letter = string[i] - 65;
		if (letter < 0 || letter > 26) continue;
		for (int j = 0; j < 9; j++){
			if (letters[letter][j].x1 == -1) break;
			drawLine((int)((letters[letter][j].x1)*sizeMul + x + i*32*sizeMul), (int)((letters[letter][j].y1)*sizeMul + y),
				(int)((letters[letter][j].x2)*sizeMul + x + i*32*sizeMul), (int)((letters[letter][j].y2)*sizeMul + y), r, g, b, thicc);
		}
	}
}
